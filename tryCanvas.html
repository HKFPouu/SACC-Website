<!DOCTYPE html>
<html lang="en">

<head>
  <title>draw curve</title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    #canvas {
      background: #282c5b;
    }
  </style>

</head>

<body>
  <div class="firstScreen">
    <div class="Logo">
      <canvas id="canvas" width="1850" height="2811"></canvas>
    </div>
  </div>

  <script>
    var canvas = document.getElementById('canvas');
    var percent = 0;
    var ctx;
    canvas.style.width = document.documentElement.clientWidth + 'px';
    canvas.style.height = document.documentElement.clientHeight * 3 + 'px';

    function drawCurve() {
      function drawFirstCurve() {
        function one() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#cf91d4';
          ctx.setLineDash([80, 30]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [290, -10],
            [270, 70],
            0.1,
            percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#9c91d5';
          ctx.setLineDash([80, 30]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [150, 230],
            [0, 350],
            0.1,
            percent
          );

          ctx.stroke();
        }
        one()
        two()
      }

      function drawSecondCurve() {
        function one() {
          ctx.lineWidth = 40;
          ctx.strokeStyle = '#8692fe';
          ctx.setLineDash([110, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [580, -10],
            [405, 400],
            0.1,
            percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 40;
          ctx.strokeStyle = '#96d493';
          ctx.setLineDash([90, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [417, 383],
            [215, 630],
            0.07,
            percent
          );

          ctx.stroke();
        }
        one()
        two()
      }

      function drawThirdCurve() {
        function one() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#8dc6e1';
          ctx.setLineDash([140, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1430, -10],
            [1300, 650],
            0.15,
            percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#febc7f';
          ctx.setLineDash([140, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1300, 649],
            [630, 1250],
            0.15,
            percent
          );

          ctx.stroke();
        }

        function three() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#ff9281';
          ctx.setLineDash([140, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [630, 1250],
            [520, 1290],
            0.1,
            percent
          );

          ctx.stroke();
        }

        one()
        two()
        three()
      }

      function drawFourthCurve() {
        function one() {
          ctx.lineWidth = 30;
          ctx.strokeStyle = '#cd5dbf';
          ctx.setLineDash([160, 60]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1880, 550],
            [1620, 1211],
            0.06,
            percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 30;
          ctx.strokeStyle = '#82fef6';
          ctx.setLineDash([160, 60]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1621, 1210],
            [620, 2300],
            0.14,
            percent
          );

          ctx.stroke();
        }

        function three() {
          ctx.lineWidth = 30;
          ctx.strokeStyle = '#4f70d9';
          ctx.setLineDash([160, 60]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [620, 2300],
            [-100, 2600],
            0.1
          );

          ctx.stroke();
        }

        one()
        two()
        three()
      }

      drawFirstCurve()
      drawSecondCurve()
      drawThirdCurve()
      drawFourthCurve()
    }

    function animate() {
      ctx.clearRect(0, 0, 1920, 2811);
      ctx.beginPath();
      drawCurve()
      console.log("@")
    }

    function drawCurvePath(ctx, start, end, curveness, percent) {
      var cp = [
        (start[0] + end[0]) / 2 - (start[1] - end[1]) * curveness,
        (start[1] + end[1]) / 2 - (end[0] - start[0]) * curveness
      ];

      ctx.moveTo(start[0], start[1]);

      for (let t = 0; t <= percent / 100; t += 0.01) {
        let x = quadraticBezier(start[0], cp[0], end[0], t);
        let y = quadraticBezier(start[1], cp[1], end[1], t);
        ctx.lineTo(x, y);
      }
    }

    function quadraticBezier(p0, p1, p2, t) {
      var k = 1 - t;
      return k * k * p0 + 2 * (1 - t) * t * p1 + t * t * p2;
    }


    var a = window.setInterval(() => {
      percent++;
      animate()
      if (percent >= 100)
        window.clearInterval(a)
    }, 20)

    function drawCircle() {
      function drawfirstCircle() {
        ctx.lineWidth = 20;
        ctx.setLineDash([80, 0]);
        ctx.beginPath();
        ctx.strokeStyle = "transparent";
        ctx.arc(1380, 290, 100, 0, 2 * Math.PI);
        ctx.stroke()

        ctx.clip()
        ctx.rotate(30 * Math.PI / 180)
        ctx.beginPath();
        ctx.fillRect(1150, -335, 400, 20);
        ctx.fillStyle = "#63aaec";
        ctx.fillRect(1150, -355, 400, 20);
        ctx.fillStyle = "#7393fa";
        ctx.fillRect(1150, -375, 400, 20);
        ctx.fillStyle = "#cdfefb";
        ctx.fillRect(1150, -395, 400, 20);
        ctx.fillStyle = "#4cb1e7";
        ctx.fillRect(1150, -415, 400, 20);
        ctx.fillStyle = "#71d4fb";
        ctx.fillRect(1150, -435, 400, 20);
        ctx.fillStyle = "#d0fefe";
        ctx.fillRect(1150, -455, 400, 20);
        ctx.fillStyle = "#7188fa";
        ctx.fillRect(1150, -475, 400, 20);
        ctx.fillStyle = "#49b2e9";
        ctx.fillRect(1150, -495, 400, 20);
        ctx.fillStyle = "#71ccf9";
        ctx.fillRect(1150, -515, 400, 20);
        ctx.fillStyle = "#cdfffe";
        ctx.fillRect(1150, -535, 400, 20);
        ctx.fillStyle = "#71ccf9";
        ctx.fillRect(1150, -555, 400, 20);
        ctx.fillStyle = "#73ecfd";
        ctx.stroke();

        ctx.beginPath();
        ctx.lineWidth = 23;
        ctx.strokeStyle = "#e5a0d6";
        ctx.arc(1340, -440, 100, 0, Math.PI);
        ctx.stroke();

        ctx.beginPath();
        ctx.strokeStyle = "#aeadfd";
        ctx.arc(1340, -440, 100, 0.9 * Math.PI, 2.1 * Math.PI);
        ctx.stroke()
      }

      drawfirstCircle()
    }

    function drawImg() {
      let red = new Image(),
      purple = new Image(),
        yellow = new Image()
        ;
      red.src = "./img/红色星球.png";
      yellow.src = "./img/黄色星球.png";
      purple.src = "./img/绿紫星球.png";

      red.onload = function () {
        console.log("1")
        ctx = canvas.getContext('2d');
        ctx.drawImage(red, 1230, -400, 782, 1200)
      }

      purple.onload = function () {
        ctx = canvas.getContext('2d');
        console.log("2")
        ctx.drawImage(purple, -30, -140, 440, 600)
      }

      yellow.onload = function () {
        console.log("3")
        ctx = canvas.getContext('2d');
        ctx.drawImage(yellow, -290, 430, 1080, 1500)
        drawCircle()
        animate();
      }
      
    }

    drawImg()
  </script>
</body>

</html>