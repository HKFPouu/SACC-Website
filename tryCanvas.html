<!DOCTYPE html>
<html lang="en">

<head>
  <title>draw curve</title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    #canvas {
      background: #282c5b;

    }
  </style>

</head>

<body>
  <canvas id="canvas" width="1850" height="2811"></canvas>
  <script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var percent = 0,
      time = 0;

    canvas.style.width = document.documentElement.clientWidth + 'px';
    canvas.style.height = document.documentElement.clientHeight * 3 + 'px';


    // var curve = window.setInterval(() => {
    //   percent++;
    //   animate()
    //   if (percent > 100) {
    //     window.clearInterval(curve)
    //     drawRedPlanet()
    //     setTimeout(() => {
    //       drawYellowPlanet()
    //     }, 300)
    //     setTimeout(() => {
    //       m()
    //     }, 4000)
    //   }
    // }, 10)
    drawYellowPlanet()
           setTimeout(() => {
          m()
        }, 4000)
    var m = () => {
      window.setInterval(() => {
        time++;
        drawMeteorites()
        if (time > 100) {
          window.clearInterval(m)
        }
      }, 20)
    }

    function drawCurve() { //画轨迹
      function drawFirstCurve() {
        function one() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#cf91d4';
          ctx.setLineDash([80, 30]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [280, -10],
            [150, 230],
            0.1, percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#9c91d5';
          ctx.setLineDash([80, 30]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [150, 230],
            [0, 350],
            0.1, percent
          );

          ctx.stroke();
        }
        one()
        two()
      }

      function drawSecondCurve() {
        function one() {
          ctx.lineWidth = 40;
          ctx.strokeStyle = '#8692fe';
          ctx.setLineDash([110, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [580, -10],
            [405, 400],
            0.1, percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 40;
          ctx.strokeStyle = '#96d493';
          ctx.setLineDash([110, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [416, 384],
            [-100, 900],
            0.07, percent
          );

          ctx.stroke();
        }
        one()
        two()

      }

      function drawThirdCurve() {
        function one() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#8dc6e1';
          ctx.setLineDash([140, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1430, -10],
            [1300, 650],
            0.15, percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#febc7f';
          ctx.setLineDash([140, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1300, 649],
            [550, 1250],
            0.15, percent
          );

          ctx.stroke();
        }

        function three() {
          ctx.lineWidth = 35;
          ctx.strokeStyle = '#ff9281';
          ctx.setLineDash([140, 50]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [550, 1249],
            [-100, 1400],
            0.1, percent
          );

          ctx.stroke();
        }
        one()
        two()
        three()
      }

      function drawFourthCurve() {
        function one() {
          ctx.lineWidth = 30;
          ctx.strokeStyle = '#cd5dbf';
          ctx.setLineDash([160, 60]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1880, 550],
            [1620, 1211],
            0.06, percent
          );

          ctx.stroke();
        }

        function two() {
          ctx.lineWidth = 30;
          ctx.strokeStyle = '#82fef6';
          ctx.setLineDash([160, 60]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [1621, 1210],
            [620, 2300],
            0.14, percent
          );

          ctx.stroke();
        }

        function three() {
          ctx.lineWidth = 30;
          ctx.strokeStyle = '#4f70d9';
          ctx.setLineDash([160, 60]);
          ctx.beginPath();

          drawCurvePath(
            ctx,
            [620, 2300],
            [-100, 2600],
            0.1, percent
          );

          ctx.stroke();
        }

        one()
        two()
        three()
      }

      drawFirstCurve()
      drawSecondCurve()
      drawThirdCurve()
      drawFourthCurve()
    }

    function drawCurvePath(ctx, start, end, curveness, percent) { //贝塞尔曲线
      let cp = [
        (start[0] + end[0]) / 2 - (start[1] - end[1]) * curveness,
        (start[1] + end[1]) / 2 - (end[0] - start[0]) * curveness
      ];
      ctx.moveTo(start[0], start[1]);
      for (let t = 0; t <= percent / 100; t += 0.01) {
        let x = quadraticBezier(start[0], cp[0], end[0], t);
        let y = quadraticBezier(start[1], cp[1], end[1], t);
        ctx.lineTo(x, y);
      }
    }

    function quadraticBezier(p0, p1, p2, t) { //贝塞尔曲线方程
      var k = 1 - t;
      return k * k * p0 + 2 * (1 - t) * t * p1 + t * t * p2;
    }

    function drawYellowPlanet() { // 画黄色星球
      let arr = [];
      ctx.strokeStyle = "#f8f9ad";
      ctx.fillStyle = "#e1cf85";

      for (let i = 1.5 * Math.PI; i <= 3.5 * Math.PI; i += 2 * (Math.PI / 180)) {
        let x = 0 + 500 * Math.cos(i);
        let y = 1100 + 500 * Math.sin(i);
        arr.push([x, y]);
      }

      let startPoint = arr.shift();
      ctx.beginPath();
      ctx.moveTo(startPoint[0], startPoint[1]);

      let rander = function () {
        if (arr.length) {
          ctx.lineWidth = 20;
          ctx.setLineDash([80, 0]);

          let tmpPoint = arr.shift();
          ctx.lineTo(tmpPoint[0], tmpPoint[1]);
          ctx.fill()
          ctx.stroke();
        } else {
          arr = null;
          return;
        }

        requestAnimationFrame(rander);
      };

      rander();
    }

    function drawCircle() { //画多层色星球
      function drawfirstCircle() {
        ctx.lineWidth = 20;
        ctx.setLineDash([80, 0]);
        ctx.beginPath();
        ctx.strokeStyle = "transparent";
        ctx.arc(1380, 290, 100, 0, 2 * Math.PI);
        ctx.stroke()

        ctx.clip()
        ctx.rotate(30 * Math.PI / 180)
        ctx.beginPath();
        ctx.fillRect(1150, -335, 400, 20);
        ctx.fillStyle = "#63aaec";
        ctx.fillRect(1150, -355, 400, 20);
        ctx.fillStyle = "#7393fa";
        ctx.fillRect(1150, -375, 400, 20);
        ctx.fillStyle = "#cdfefb";
        ctx.fillRect(1150, -395, 400, 20);
        ctx.fillStyle = "#4cb1e7";
        ctx.fillRect(1150, -415, 400, 20);
        ctx.fillStyle = "#71d4fb";
        ctx.fillRect(1150, -435, 400, 20);
        ctx.fillStyle = "#d0fefe";
        ctx.fillRect(1150, -455, 400, 20);
        ctx.fillStyle = "#7188fa";
        ctx.fillRect(1150, -475, 400, 20);
        ctx.fillStyle = "#49b2e9";
        ctx.fillRect(1150, -495, 400, 20);
        ctx.fillStyle = "#71ccf9";
        ctx.fillRect(1150, -515, 400, 20);
        ctx.fillStyle = "#cdfffe";
        ctx.fillRect(1150, -535, 400, 20);
        ctx.fillStyle = "#71ccf9";
        ctx.fillRect(1150, -555, 400, 20);
        ctx.fillStyle = "#73ecfd";
        ctx.stroke();

        ctx.beginPath();
        ctx.lineWidth = 23;
        ctx.strokeStyle = "#e5a0d6";
        ctx.arc(1340, -440, 100, 0, Math.PI);
        ctx.stroke();

        ctx.beginPath();
        ctx.strokeStyle = "#aeadfd";
        ctx.arc(1340, -440, 100, 0.9 * Math.PI, 2.1 * Math.PI);
        ctx.stroke()
      }

      function drawThirdCircle() {
        ctx.fillStyle = "#c85c52";
        ctx.beginPath();
        ctx.lineWidth = 10;
        ctx.strokeStyle = "#c9fcb9";
        ctx.arc(200, 110, 100, 0, Math.PI);
        ctx.stroke()
        ctx.fill()

        ctx.beginPath();
        ctx.lineWidth = 10;
        ctx.strokeStyle = "#7874e2";
        ctx.arc(200, 110, 100, 0.7 * Math.PI, 2 * Math.PI);
        ctx.stroke();
        ctx.fill()

      }

      drawThirdCircle()
      drawfirstCircle()
    }

    function drawRedPlanet() { //画红色星球
      ctx.stroke();
      let arr = [
        [1500, -100],
        [1450, -50],
        [1540, 40],
        [1545, 65],
        [1549, 90],
        [1560, 110],
        [1570, 130],
        [1571, 180],
        [1600, 190],
        [1660, 270],
        [1670, 305],
        [1720, 320],
        [1730, 330],
        [1740, 350],
        [1760, 345],
        [1920, 370],
        [1920, -50],
        [1500, -100]
      ]

      let startPoint = arr.shift();
      ctx.beginPath();
      ctx.moveTo(startPoint[0], startPoint[1]);

      let Rander = function () {

        if (arr.length) {
          ctx.lineWidth = 20;
          ctx.setLineDash([80, 0]);
          ctx.strokeStyle = "#f7caa9";
          ctx.fillStyle = "#ff6f8a";
          ctx.lineJoin = "round";

          let tmpPoint = arr.shift();
          ctx.lineTo(tmpPoint[0], tmpPoint[1]);
          ctx.fill()
          ctx.stroke();
        } else {
          arr = null;
          return;
        }

        requestAnimationFrame(Rander);
      };

      Rander();
    }

    function animate() { //画轨迹运动曲线
      ctx.clearRect(0, 0, 1920, 2811);
      drawCurve()
    }

    function Ellipse(ctx, x, y, a, b) { //画椭圆
      let step = (a > b) ? 1 / a : 1 / b;
      ctx.fillStyle = "#dba36a"
      ctx.beginPath();
      ctx.moveTo(x + a, y);
      for (let i = 0; i < 2 * Math.PI; i += step) {
        ctx.lineTo(x + a * Math.cos(i), y + b * Math.sin(i));
      }
      ctx.closePath();
      ctx.fill();
    }

    function drawMeteorites() { // 画陨石
      ctx.lineWidth = 25;
      ctx.strokeStyle = "#dba36a";
      ctx.lineJoin = "round"
      ctx.beginPath()
      ctx.moveTo(-10,1000)
      ctx.lineTo(0,1590)
      ctx.lineTo(230,1530)
      ctx.closePath()
      ctx.fill()
      ctx.stroke()
      Ellipse(ctx,80,750,50,20)
      Ellipse(ctx,230,830,50,20)
      Ellipse(ctx,270,1400,50,20)
      Ellipse(ctx,140,900,50,20)
      Ellipse(ctx,440,1050,30,100)
      Ellipse(ctx,240,1200,20,70)
      Ellipse(ctx,300,1080,50,20)
      Ellipse(ctx,350,1300,50,20)
      Ellipse(ctx,170,1010,50,20)
      Ellipse(ctx,230,950,50,20)
    }
  </script>
</body>

</html>